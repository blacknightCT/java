
１０．３．３　ＯＥＳ設定送信
ＳＴＡＴＵＳ	　確定　　検討中　（　　　　　　　　　　　　　　　　　　　　　）
１．機能概要


	ＯＥＳの設定データをＳＴＮに送信する
ＫＣＰ／ＫＤへも送信が可能


２．入力



	2.1 入力データ



	

	2.2 操作手順
	
（設定モード）
	
　※　ターミナルＩＤが「１」のＰＯＳでしか操作できない。

　※　送信先の「ステーション」とは、箱ステーション／ステーションレス両方のステーションを
指す。（ステーションレスのシステムでもステーションへの設定配信は必要）
	 ＯＥＳ設定送信画面での操作可ボタン）
	
＜タッチパネル＞
   確認 
   直前訂正 
   終了 
   前頁 
   次頁 
   行送り 
   行戻し 
	
	2.3 参照データ
	
	システム管理固定マスタ(ｼｽﾃﾑ_POS)
KCP切離しパターンマスタ
OES設定送信電文（V005.100 KD2～　「KDサーバ」に対するKDサーバ、Ｎ台ＫＤを指定した
設定送信に変更）送出
ＯＥＳ設定送信電文（V005.200～ ＳＯＴ端末用ＯＥＳ設定送信の追加）送出
 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信
３．処理



	3.1 入力制約
	■設定モード　　　□トレーニングモード
	3.2 状態制約
	■サインオフ　　　■サインオン
	3.3 実行内容
	

	
（１）設定送信可能なＯＥＳ機器
	ＳＴＮ／ＫＣＰ／ＫＤ
送信するファイルの詳細は「EYA－05287F ＬＡＮ伝送仕様書」参照。
（５．各種設定ＤＬＬ　テキストフォーマット
　－　５．４　マスターターミナル／ステーション
　OES設定DLL対象ファイル管理表.xls）　

（２）起動時、システム管理固定マスタ(ｼｽﾃﾑ_POS)を読み込み、接続されている機器の情報を
取得する。
・V002.000より送信結果リストに表示する機器（送信対象機器名称欄）は、
システムで接続している機器のみ表示する。
　　　・V004.000より接続可能になったラベルプリンタは送信対象外。

（３）V002.000より透かしイメージの送信有無指定は、ＯＥＳ設定送信画面上の「透かし
イメージを送信する」チェックボックスにて行う（デフォルトは”送信しない”）。
ＯＥＳ設定送信業務が起動する毎にチェックボックスは初期値に戻る。
・チェックＯＮ　：透かしイメージを送信する
・チェックＯＦＦ：透かしイメージを送信しない
＜理由＞
	　　　透かしイメージデータは容量が大きいため、送信に時間がかかり、
全体パフォーマンスに影響する。
	　　　また、透かしイメージデータは設置時に送信するのが主で、日常のメニュー
改訂等による設定送信では透かしイメージの送信は行わないため。
・「透かしイメージを送信する」チェックボックスの活性／非活性は下表の通り。
非活性はグレーアウト。
送信内容	活性／非活性
日付・時刻	非活性
全設定	活性
メニューテーブル	非活性
システムタイプ	活性
ステーション機能	活性
ステーション復旧	非活性
　　　　業務起動時「透かしイメージを送信する」チェックボックスは「非活性」となる。
ステーション復旧は「透かしイメージを送信する」チェックボックスの
活性／非活性　は存在しないが必ず送信する。



 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信
３．処理



	3.3 実行内容
	
	
（４）送信先に「ステーション」が選択されていた場合、選択されている送信内容の該当する
　　　ファイルをステーションに送信する。

（５）送信内容に「日付・時刻」「全設定」「ステーション機能」が選択され、送信先機器に
　　　ＫＣＰ１～３２のいずれかが選択されている場合、該当するファイルをステーション経由
　　　で選択ＫＣＰへ送信する。
　　　送信内容が上記以外のものは、ＫＣＰに送信しない。

　　　※送信内容の「ステーション復旧」は、ステーション故障時の復旧するために使用する
　　　　機能であり、ステーションへのみデータ送信を行い、他機器へは送信しない。

（６）他の業務から起動された場合、機能によって、送信内容固定で起動される。
　　　　開局時設定更新時・・・・全設定
　　　　扱者№設定時・・・・・・全設定
　　　　設定読み込み時・・・・・未選択状態
　　　　設定マニュアル更新時・・未選択状態
　　　　日付時刻設定時・・・・・日付・時刻

（７）従業員マスタと扱者Ｎｏリンクマスタより、ＯＥＳ用設定ファイルである、
「責任者＆担当者テーブル」を作成する必要があるが、これはＯＥＳに設定送信する
直前に、自動生成する。

（８）業務終了時、送信が正常終了していなければ、業務を終了して良いか確認するダイアログを
　　　表示する。送信を実行していない場合も同様に表示する。

（９）ＫＤ接続対応により画面が変更され、
　　　操作も若干変更になっている。詳細は「４．表示」参照。

（１０）ステーション接続有無やステーション切離中といったステーション接続状態による
　　　　送信可／不可は「10.03.03 ＯＥＳ設定送信補足　（送信可／不可マトリクス）」を
　　　　参照。

（１１）送信対象ＫＣＰ／ＫＤ台数はシステム管理固定マスタの「ＫＣＰ接続台数」とする。
　　　　物理プリンタ／論理プリンタ／ＩＰアドレスの設定有無に関わらず、
ＫＣＰ／ＫＤ０１～ＫＣＰ接続台数までのボタンを押下可能表示する。

物理プリンタ／論理プリンタの設定については
「MYA-09711 FScompass設定ツール機能仕様書　９．２１ システム管理固定マスタ設定」
の「４．補足事項・制限事項」を参照。

（１２）送信内容ごとのＯＥＳに送信するファイルについては「EYA－05287F ＬＡＮ伝送仕様書」
参照
（５．各種設定ＤＬＬ　テキストフォーマット
　－　５．４　マスターターミナル／ステーション
　OES設定DLL対象ファイル管理表.xls）　

 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信
３．処理



	3.3 実行内容
	
	
（１３）設定送信直前に、ＯＥＳに送信する以下のマスタの設定値を固定で変更する。
(V001.100で対応)
・CCPフォーマットマスタ（名称関連）
「ﾄﾚｰﾆﾝｸﾞﾒｯｾｰｼﾞ名称：漢字名称」　　　 ：“※ トレーニング ※”
　　　　・CCPフォーマットマスタ（印字情報_行名称）
　　　　　　「トレーニング名称の行：印字タイプ」　：「３：印字有り」
　　　　　　「トレーニング名称の行：印字属性」　　：「８：縦倍横４倍」

（１４）設定送信時、メニューマスタのリンクＤＰコードが３桁以上のものは「99」に変換して
送信する。(V002.200で対応)

　　　リンクＤＰコードの変換規則
POS	
⇒	OES	 
 
※V002.100以前は送信時に捨てられていた。
※ミスクコード
0001～0098		01～98	
0099～9998		99	
9999		99	

（１５）ＫＤサーバ対応  （V005.100 KD2～）
　　　【「ＫＤサーバタイプ」＝「なし」の場合】
・ＫＤサーバへのＤＬＬを行わない。
　（「ＫＤサーバ」各ＫＤ共に初期状態は未選択で、選択不可状態とする）

　　　【「ＫＤサーバタイプ」＝「あり」の場合】
・ＫＤサーバへの設定ＤＬＬを選択する事が可能。
・「ＫＤサーバ」と「ＫＤ」は初期状態として選択状態で起動される。
・画面表示と印字名称は固定で「ＫＤサーバ」とする。
・「送信先機器」で「KCP/KD」を選択した場合、既存の「KCPxx」「KDxx」の上部に
　「ＫＤサーバ」ボタンが表示される。（ｘｘは各機器番号）
・送信内容により、「ＫＤサーバ」「ＫＤ」の選択が可否を変える
　「日付・時刻」　　　　　「ＫＤサーバ」「ＫＤ」を複数選択可能
　「全設定」　　　　　　　「ＫＤサーバ」のみ選択可能（「ＫＤ」は選択不可 ）
　「メニューテーブル」　　「ＫＤサーバ」のみ選択可能（「ＫＤ」は選択不可 ）
　「システムタイプ」　　　「ＫＤサーバ」のみ選択可能（「ＫＤ」は選択不可 ）
　「ステーション機能」　　「ＫＤサーバ」のみ選択可能（「ＫＤ」は選択不可 ）
　「ステーション復旧」　　選択不可
・通信シーケンスは「【補足】ＫＤサーバ対応後の通信フロー」参照

 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
３．処理



	3.3 実行内容
	
	
（１６）ＳＯＴ対応（V005.200～）

　　ア）概要
　　　・ＳＯＴ端末に対し設定ＤＬＬが行えるようにする。

　　　・指定したＳＯＴ端末に対し、マスタ等の設定ファイル、画像ファイル（分割形式）と
　　　　それぞれのバージョン識別ファイルを送信する。

　　　・上位からの配信は、ＳＴＮやＨＴＬと同様にＰＯＳ経由とする。

　　　・配信可能な台数はＨＴＬとＳＯＴを合わせて８０台とする。

　　　・ＳＯＴ設定配信はＨＴＬと異なり、ＳＴＮを経由せず、直接、ＳＯＴに伝文を送る。

　　　・ＰＯＳおよび設定ツールでは、ＵＳＢメモリ内の設定データの取り込みを可能とする。
　　　　（既存と同じ）

　　　・ＳＯＴ設定データ更新のタイミングは下記の通りとする。

　　　　　①ＰＯＳシステムメンテ、ＰＯＳユーザー保守のＯＥＳ設定送信業務にて
　　　　　　ＳＯＴへ送信する。

　　　　　②ＵＳＢメモリからＳＯＴ本体へ直接ロード。

　　　　　③ＳＯＴのスリープ解除時にＰＯＳから設定データを取得。

 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
３．処理



	3.3 実行内容
	
	
（１６）ＳＯＴ対応（V005.200～）（続き）

　　イ）ＳＯＴ用設定データのファイル

　　　　ＳＯＴ用設定データファイルの内訳は以下の通りとする。
　　　　（保存フォルダ）: C:\FsPos\PosApl\OrderRiver\Prog
ファイル名	説明
SOT_Delivery.csv	設定データファイルのバージョン識別ファイル
SOT_Image.csv	画像ファイルのバージョン識別ファイル
SOT_Delivery.zip	設定データファイル
SOT_Image.zip	画像ファイル
SOT_Image.001	画像ファイルを分割したファイル
SOT_Image.002	
　　:	
SOT_Image.999	画像ファイルを分割したファイル（ＭＡＸ９９９個目）

　　　 SOT_Delivery.zipの内訳は以下の通り。(次頁に続く)
マスタ名	CSVファイル
メニューマスタ	MC_FUMENU.CSV
SCPマスタ	MC_FSCP.CSV
レストランマスタ	MC_REST.CSV
テーブルマスタ	MC_FTBL.CSV
情報部マスタ	MC_FHINP.CSV
OESシステムオプションマスタ	MO_OESSYSOP.CSV
HTLエラーメッセージマスタ	MO_FHERRM.CSV
システム管理固定マスタ(ｼｽﾃﾑ_POS)	MC_SYSTEMINFFIX_SYS.CSV
システム管理固定マスタ(STN)	MC_SYSTEMINFFIX_STN.CSV
システム管理固定マスタ(HTL)	MC_SYSTEMINFFIX_HTL.CSV
セルフメニューマスタ	MO_SOTMENU.CSV（～V6）
MO_SOTMENU_N.CSV（V007.000～）＊１
セルフSCPマスタ	MO_SOTSCP.CSV（～V6）
MO_SOTSCP_N.CSV（V007.000～）＊１
セルフパターンマスタ	MO_SOTPTN.CSV（～V6）
MO_SOTPTN_N.CSV（V007.000～）＊１
セルフカテゴリマスタ	MO_SOTCAT.CSV（～V6）
MO_SOTCAT_N.CSV（V007.000～）＊１
セルフ注文割付マスタ	MO_SOTPRETBTN.CSV（～V6）
MO_SOTPRETBTN_N.CSV（V007.000～）＊１
セルフTOPカテゴリ割付マスタ	MO_SOTPRETCAT.CSV
セルフTOP画面割付マスタ	MO_SOTPRETTOP.CSV
セルフ休止画面設定マスタ	MO_SOTBRK.CSV
セルフメッセージマスタ	MO_SOTMSG.CSV（～V6）
MO_SOTMSG_N.CSV（V007.000～）＊１
セルフシステムオプションマスタ	MO_SOTSYSOP.CSV
　　　　(次頁に続く)



 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
３．処理



	3.3 実行内容
	
	
（１６）ＳＯＴ対応（V005.200～）（続き）
　　　　SOT_Delivery.zipの内訳は以下の通り。(前頁の続き)
マスタ名	CSVファイル
セルフフリーページマスタ
(V010.000～)	MO_SOTFREEPAGE.CSV
MO_SOTFREEPAGE_N.CSV ＊２
セルフフリー割付マスタ
(V010.000～)	MO_SOTFREEPRET.CSV
MO_SOTFREEPRET_N.CSV ＊２
　　＊１  V6までは「_N」が付かないファイル名で出力。（Shift_JIS形式）
　　　　　V007.000より「_N」が付くファイル名で出力。（Unicode形式）
　　＊２　現時点(V10.0)では多言語対応である必要はないが、
　　　　　将来用に多言語対応出力(Unicode形式)をしておく。

　　　SOT_Image.zipの内訳は以下の通り。
フォルダ名	ファイル名	
Background\	background.jpg	背景画像
CheckIn\	check_in.png	チェックインアイコン画像
NoImage\	no_image.jpg	NoImage画像
Menu\Item\	*.jpg	メニュー画像
Menu\Movie\	*.mp4	メニュー詳細動画
Hybernation\	*.jpg/*.mp4	休止画面(ｽｸﾘｰﾝｾｰﾊﾞｰ)画像・動画
LockScreen\	lockscreen.jpg	ロック画面画像
ThankYou\	thank_you.jpg	御礼画面 画像
Welcome\	welcome.jpg	来店画面 画像
Advertisement\	*.jpg	TOP画面広告・ガイダンス画像
Category\	*.jpg	TOP画面カテゴリボタン画像
Free\	*.jpg	セルフフリーレイアウト画像
(V010.000～)



 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
３．処理



	3.3 実行内容
	
	
（１６）ＳＯＴ対応（V005.200～）（続き）

　　ウ）設定送信画面

　　　①画面表示／操作
　　　　・送信先機器で「ｾﾙﾌ（01～32）」「ｾﾙﾌ（33～64）」「ｾﾙﾌ（65～80）」の
　　　　　ボタンが追加され、各ボタンを選択すると送信先機器が表示する。

　　　　・システム管理固定マスタ(HTL)のHTL1～80の機種が”ｾﾙﾌ”となっている機器のボタン
　　　　　には”ｾﾙﾌnn”と表示、起動時は選択された状態となる。
　　　　　※nn＝各SOT端末番号

・いずれかの”ｾﾙﾌnn”ボタンが押下されている場合、ＳＴＮのボタンを
押下された状態にし、ＳＴＮが非選択にできないようボタンをディセーブルにする。
　＜理由＞
　　ＳＴＮとＳＯＴの設定が異なるとオーダーが出来なくなり、
　　それを防ぐためにＳＴＮとＳＯＴの設定の同期を取る必要があるため。

　　　　・システム管理固定マスタ(HTL)のHTL1～80の機種が”HTL”となっている
機器のボタンには”HTLnn”と表示し、ボタンの状態はディセーブル（選択不可）
とする。

　　　　・ＳＯＴ接続台数設定を超えるボタンには”HTLnn”と表示し、ボタンの状態は
　　　　　ディセーブル（選択不可）とする。

　　　　・ＳＯＴへの対象とする送信内容は、「全設定」「メニュー」「システムタイプ」とする。
　　　　　「日付・時刻」「ステーション機能」「ステーション復旧」を選択時は、
　　　　　セルフの３ボタンは表示されない。

　　　　・「セルフイメージを送信する。」のチェックボックスの初期状態は
チェックは無しとする。

　　　・ステーション切離時にはＳＯＴに対しての設定送信は不可とする。


 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
３．処理



	3.3 実行内容
	
	
（１６）ＳＯＴ対応（V005.200～）（続き）

　　　（例）設定　HTL接続台数１２台、HTL01～06が機種＝HTL、HTL07～12が機種＝SOT
　　　　　　ｾﾙﾌ(01～32)押下時の画面表示例

　　　　■送信先機器表示
ｽﾃｰｼｮﾝ	KCP/KD
ｾﾙﾌ(01-32)	ｾﾙﾌ(33-64)	ｾﾙﾌ(65-80)
　　　　
HTL01	HTL02	HTL03	HTL04
HTL05	HTL06	ｾﾙﾌ07	ｾﾙﾌ08
ｾﾙﾌ09	ｾﾙﾌ10	ｾﾙﾌ11	ｾﾙﾌ12
HTL13	HTL14	HTL15	HTL16
HTL17	HTL18	HTL19	HTL20
HTL21	HTL22	HTL23	HTL24
HTL25	HTL26	HTL27	HTL28
HTL29	HTL30	HTL31	HTL32
　　　　・01～06は[HTLnn]と表示され、押下不可。
　　　　・07～12は[ｾﾙﾌnn]と表示され、押下可能（起動時は「選択」状態）。
　　　　・13～32は[HTLnn]と表示され、押下不可。

　　　　■送信機器名称／送信結果一覧
No	送信機器名称	送信結果

1	ｽﾃｰｼｮﾝ	送信する

2	KCP1	送信しない
3	KD2	送信しない
4	KCP3	送信しない
	:	送信しない
	ｾﾙﾌ07	送信する

	ｾﾙﾌ08	送信する
	:	送信する
	ｾﾙﾌ12	送信する
　　　　※HTL01～HTL06、HTL13～は表示しない。

 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
３．処理



	3.3 実行内容
	
	
（１６）ＳＯＴ対応（V005.200～）（続き）

　　②設定送信処理

　　　・送信先機器で「ｾﾙﾌ（01～32）」「ｾﾙﾌ（33～64）」「ｾﾙﾌ（65～80）」の
　　　　いずれかのボタンが押下された状態で、「確認」ボタンを押下すると選択した
　　　　ＳＯＴ端末に対し、設定送信をする。

・ＳＯＴ端末への設定送信は２台同時に行う。
１台が完了した時点で次のＳＯＴ端末への設定送信が開始され、常に２台の
ＳＯＴ端末に対して設定送信が行われている状態になる。（最後の端末は１台。）

　　　・「セルフイメージを送信する。」のチェックボックスをＯＮした場合、
設定ファイル ＋ 画像ファイルを送付する。
チェックが無い場合、設定ファイルのみを作成し、送付する。

　　　・選択された送信内容が「全設定」「メニュー」「システムタイプ」のいずれかに
　　　　関わらず、ＳＯＴ端末には全ての設定ファイルを作成し送信する。


配信ファイル	チェック有り	チェック無し
バージョン識別（設定ファイル）	送信する	送信する
設定ファイル	送信する	送信する
バージョン識別（画像ファイル）	送信する	送信しない
画像ファイル　　　　　　※１	送信する	送信しない
　　　　
※１　画像ファイルに関して
　　　　　・画像ファイルは１０ＭＢに分割する。（SOT_Image.001～SOT_Image.999）
　　　　　　　　　　　　　　分割しないように変更。(SOT_Image.001)(V009.000～)
　　　　　　理由：ファイル分割によるダウンロード失敗のリスクの改善のため。
　　　　　・前回送付した画像ファイルから変更がない場合は送付しない。
　　

 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
３．処理



	3.3 実行内容
	
	
（１６）ＳＯＴ対応（V005.200～）（続き）

③ＳＯＴ用送信ファイルの作成

　　　＜１＞設定データファイル「SOT_Delivery.zip」の作成

・ＤＢより対象となる設定をＣＳＶファイルで作成する。
　　　　　【作成対象のマスタ】
マスタ名	ＣＳＶファイル
メニューマスタ	MC_FUMENU.CSV
SCPマスタ	MC_FSCP.CSV
レストランマスタ	MC_REST.CSV
テーブルマスタ	MC_FTBL.CSV
情報部マスタ	MC_FHINP.CSV
OESシステムオプションマスタ	MO_OESSYSOP.CSV
HTLエラーメッセージマスタ	MO_FHERRM.CSV
システム管理固定マスタ(ｼｽﾃﾑ_POS)	MC_SYSTEMINFFIX_SYS.CSV
システム管理固定マスタ(STN)	MC_SYSTEMINFFIX_STN.CSV
システム管理固定マスタ(HTL)	MC_SYSTEMINFFIX_HTL.CSV
セルフメニューマスタ	MO_SOTMENU.CSV（～V6）
MO_SOTMENU_N.CSV（V007.000～）＊１
セルフSCPマスタ	MO_SOTSCP.CSV（～V6）
MO_SOTSCP_N.CSV（V007.000～）＊１
セルフパターンマスタ	MO_SOTPTN.CSV（～V6）
MO_SOTPTN_N.CSV（V007.000～）＊１
セルフカテゴリマスタ	MO_SOTCAT.CSV（～V6）
MO_SOTCAT_N.CSV（V007.000～）＊１
セルフ注文割付マスタ	MO_SOTPRETBTN.CSV（～V6）
MO_SOTPRETBTN_N.CSV（V007.000～）＊１
セルフTOPカテゴリ割付マスタ	MO_SOTPRETCAT.CSV
セルフTOP画面割付マスタ	MO_SOTPRETTOP.CSV
セルフ休止画面設定マスタ	MO_SOTBRK.CSV
セルフメッセージマスタ	MO_SOTMSG.CSV（～V6）
MO_SOTMSG_N.CSV（V007.000～）＊１
セルフシステムオプションマスタ	MO_SOTSYSOP.CSV
　　　　
　　　　・各作成ＣＳＶファイルをＺＩＰ形式で圧縮する。
　　　　　圧縮後のファイル名称を「SOT_Delivery.zip」とする。
 
＊１  V6までは「_N」が付かないファイル名で出力。（Shift_JIS形式）
V007.000より「_N」が付くファイル名で出力。（Unicode形式）


 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
３．処理



	3.3 実行内容
	
	
（１６）ＳＯＴ対応（V005.200～）（続き）

　　　＜２＞ バージョン識別ファイル (設定データファイル) 「SOT_Delivery.csv」の作成

　　　　・設定データファイル「SOT_Delivery.zip」作成時に
バージョン識別ファイル (設定データファイル)「SOT_Delivery.csv」を作成する。

　　　(バージョン識別ファイルの書式)
　　　[YYYYMMDDHHMMSS],[元ファイルサイズ(バイト)],[ファイルハッシュ値(MD5)] [改行コード]

　　　　・バージョン識別ファイルの書式の内訳は以下の通りとする。
　　　　　[YYYYMMDDHHMMSS]⇒「設定データファイル」が生成された日付時刻
　　　　　[ファイルサイズ（バイト）]  ⇒SOT_Delivery.zipのファイルサイズ。単位はバイト。
　　　　　[ファイルハッシュ値（MD5）]  ⇒SOT_Delivery.zipのハッシュ値。形式はMD5。
　　　　　[改行コード]　 ⇒「CRLF(0x0D,0x0A)」
　　　　(例)２０１４年５月２２日 １７：５４：５９作成　ファイル分割＝９分割
20140522175459,92160,f4ffee5b05537c1c4e07794c3f2b8ed4
[改行] 



 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
３．処理



	3.3 実行内容
	
	
（１６）ＳＯＴ対応（V005.200～）（続き）

　　＜３＞画像ファイル「SOT_Image.zip」の作成

　　　　・「セルフイメージを送信する。」のチェックボックスをＯＮした場合、
画像ファイル（SOT_Image.zip）の作成をする。
　　　　　但し、作成したSOT_Image.zipと前回送ったSOT_Image.zipと比較をし、
変更がない場合はSOT_Image.csv、SOT_Image.zipを作成しない。
ＳＯＴは画像取得時にSOT_Image.csvのバージョン情報を参照し、
自身の設定バージョンとＰＯＳ内の設定バージョンを比較し、
同じバージョンの場合はSOT_Image.zipを取得しないため、画像ファイルの
送信はされません。

　　　　・対象の画像ファイルをＺＩＰ形式で圧縮する。
　　　　　圧縮後のファイル名称を「SOT_Image.zip」とする。

　　　　・「SOT_Image.zip」を１０ＭＢ/ファイルで分割し、各ファイル名称を
　　　　　「SOT_Image.nnn」とする。（nnn＝ファイル番号連番）

　　　＜４＞ バージョン識別ファイル (画像ファイル) 「SOT_Image.csv」の作成

　　　　・画像ファイル「SOT_Image.zip」作成時に
バージョン識別ファイル (画像ファイル)「SOT_ Image.csv」を作成する。

　　　(ファイル分割情報を含むバージョン識別ファイルの書式)
[YYYYMMDDHHMMSS],[元ファイルサイズ(バイト)],[元ファイルハッシュ値(MD5)],[元ファイル名]=[ファイル①]:[ファイル②]: … :[ファイル最後] [改行]

　　　　・バージョン識別ファイルの書式の内訳は以下の通りとする。
　　　　　[YYYYMMDDHHMMSS]⇒「設定配信ファイル」が生成された日付時刻
　　　　　[元ファイルサイズ（バイト）]  ⇒分割前ファイルのファイルサイズ。単位はバイト。
　　　　　[元ファイルハッシュ値（MD5）]  ⇒分割前ファイルのハッシュ値。形式はMD5。
　　　　　[元ファイル名]  ⇒分割前のファイル名。結合後のファイル名として
　　　　　　　　　　　　　　使用されることを想定。
　　　　　[ファイルnn]    ⇒分割されたファイル名。複数のファイル名を「:」コロン
　　　　　　　　　　　　　　区切りで列挙する。順序あり（連番とする）。
　　　　　[改行コード]　 ⇒「CRLF(0x0D,0x0A)」
　　　　(例)２０１４年５月２２日 １７：５４：５９作成　ファイル分割＝９分割
20140522175459,92160,f4ffee5b05537c1c4e07794c3f2b8ed4,SOT_Image.zip= SOT_Image.001: SOT_Image.002: … : SOT_Image.009
[改行]

　　　　　(例)２０１４年５月２２日 １７：５４：５９作成　　ファイル分割＝無し
20140522175459,92160,f4ffee5b05537c1c4e07794c3f2b8ed4,SOT_Image.zip= SOT_Image.001
[改行]
　　　

 
   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
３．処理



	3.3 実行内容
	
	
（１６）ＳＯＴ対応（V005.200～）（続き）

　　④送信後の画面表示／操作

　　　・選択された各ＳＯＴ端末ごとの設定送信結果を画面に表示する。
　　　　対象の送信機器に対する送信結果欄に「送信ＯＫ」「送信ＮＧ」を表示する。

　　　・対象ＳＯＴ端末と送信結果を印字する。



 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.100 KD2～）
３．処理



	3.3 実行内容
	
	
【補足】ＫＤサーバ対応後の通信フロー  （V005.100 KD2～）
　
 




 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信
４．表示

	4.1 オペレータ側
　　フォーマット	
	
 

 

 

①初期画面
＜表示内容の説明＞
・送信内容フレーム
　　送信するマスタの種類を選択
・送信先機器フレーム
　　送信対象機器を選択
・送信結果
　　実行後、実行結果が表示される



　　　　　　　　　　　



＜以下②～⑥は例を交えて説明＞
日付時刻をＳＴＮ／ＫＤ２に送信する場合

②送信内容選択










③  ステーション...  を押下すると
　下部にボタンが表示され、”ステー
　ション”は既に選択されている状態
　となっている。
　（解除する場合は  ステーション 
　　押下）

	
 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信
４．表示

	4.1 オペレータ側
　　フォーマット	
	
 



	
④  ＫＣＰ／ＫＤ...  を押下すると
　下部にボタンが表示され、”ＫＣＰ
　０１”と”ＫＤ０２”は既に選択さ
　れている状態となっている。
　本例ではＫＤ０２にのみ送信したい
　ので、 ＫＣＰ０１  を押下し、
　ＫＣＰ０１を送信対象から外す。
０１～３２は連番となり、KCP01=KP、KCP02=KDとなっていた場合、KCP01、KD02と表示する。

画面上ＫＣＰ３以降が「未接続」
となっているのは、ＫＣＰ接続台数が２に設定されているという意味


	
 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信
４．表示

	4.1 オペレータ側
　　フォーマット	
	（V002.000～の画面）
 

 

 
	
ステーション（箱STN）＝１台、KCP４台（KCP01、03、04、05）、KD１台（KD02）が接続されている場合

１）初期画面
＜表示内容の説明＞
・送信内容フレーム
　　送信するマスタの種類を選択
・送信先機器フレーム
　　送信対象機器を選択
・送信結果
　　実行後、実行結果が表示される



２）日付時刻送信－ＫＣＰ指定画面














３）全設定指定画面

＜表示内容の説明＞
　全設定指定時でには「透かしイメージを送信する」を活性透かしｲﾒｰｼﾞを送信するﾁｪｯｸﾎﾞｯｸｽにて透かしイメージの送信有無を選択

 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信
４．表示

	4.1 オペレータ側
　　フォーマット	
	
 

（V005.100 KD2～の画面）
 

	
※ラベルプリンタ接続時の画面例
		（V004.000～）
　（KCP3がラベルプリンタの場合の
　　日付時刻送信画面）
・送信先機器のボタンは「ラベルｎ」
　表示を行い、選択不可。
・画面右側の送信結果リストの表示も
　行わない。







ＫＤサーバタイプ　[あり]の場合

１）送信先機器＝「KCP/KD」選択時
既存の[KCPxx]、[KDxx]選択ボタンの左上部の上に[ＫＤサーバ]選択ボタンを追加する。
（ xx は各機器番号）



 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
４．表示

	4.1 オペレータ側
　　フォーマット	
	
■ＳＯＴ選択対応画面
 
	

・送信先機器で“ｾﾙﾌ（01～32）”
　“ｾﾙﾌ（33～64）”“ｾﾙﾌ（65～80）”　を選択すると、下部にボタンが
　表示される。
・01～32、33～64、65～80は連番と
　なる。




	4.3 特記事項
	
	



 

   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信
４．表示




	4.3 カスタマー側
　  フォーマット	
	


　変化無し
	4.4 特記事項
	
	




   ｃｏｎｔ’ｄ  １０．３．３　ＯＥＳ設定送信（V005.200～）
５．印字




	5.1レシート・ジャーナル
	
	

■送信結果レシート　　　　　　　　　■送信結果ジャーナル

　　　：




	4.4 特記事項
	
	





